<%- include("../include/head.ejs") %> <%- include("../include/navebar.ejs") %>
<%- include("../include/notification.ejs") %>

<style>
  .training header {
    text-align: center;
  }
  .training h1 {
    font-size: 29px;
    position: relative;
    display: inline-block;
    text-align: center;
    padding-bottom: 10px;
  }
  .training h1::after {
    content: "";
    width: 40%;
    bottom: 0;
    position: absolute;
    height: 2px;
    background: #1610BB;
    left: 50%;
    transform: translateX(-50%);
  }
  .training .row > div .box {
    border: 1px solid #ccc;
    box-shadow: 10px 10px 15px rgba(0, 0, 0, 0.1);
  }

   .paginate {
     margin-top:40px
   }
  .paginate ul {
    justify-content: center;
    align-items: center;
  }
  .paginate ul li a {
    margin:0 4px;
    width:35px;
    height:35px;
    display: flex;
    background:#ccc;
    align-items: center;
    justify-content: center;
    border-radius: 5px;
    color:#0056B3
  }
  .paginate ul li a.active {
    background:#0056B3;
  }
  .paginate ul li a.active {
    color:white
  }

</style>
<div class="training">
  <div class="container">
    <header>
      <h1 class="text-center">جميع الكتب الخاصه بك</h1>
    </header>
    <div class="row">
      <% if ( MyBooks.rows.length > 0) { %>
       <% MyBooks.rows.forEach(element => { %>
      <div class="col-sm-12 col-md-6 col-lg-3">
        <div class="box">
          <div class="image">
            <h5 style="padding:7px"><%= element.name%></h5>
            <img style="height:140px" src="<%=
            element.image.split("--")[0] %>" alt="" />
          </div>
          <div class="text">
             <p>الاضطراب : <span <%=  element.isOther ? "style=color:red" : "" %>><%= element.isOther ? " هذا الكتاب مشترك مبين اكثر من اعاقه " :  element.booksDisability.name %></span></p>
          </div>
          <button class="btn btn-md btn-success download" dataHref="<%= element.pdf.split("--")[0] %>" href="/showTraining/<%= element.id %>">تنزيل الكتاب</button>
      
        </div>
      </div>
      <% }) %>
      <% }  else { %>
        <div class="col-12 alert alert-danger"> لا يوجد اي كتاب هنا</div>
      <% } %>
      
    </div>
    <div class="paginate">
        <ul class="list-unstyled d-flex">
            <% pages.forEach(element => { %>
                <li><a class="<%= page == element.number ? "active" : "" %>" href="<%= element.url %>"><%= element.number %></a></li>
            <% }) %>
        </ul>
    </div>
  </div>
</div>

<%- include("../include/footer.ejs") %> <%-
include("../include/footerScript.ejs") %>
<script src="/frontEnd/assets/js/main.js"></script>
<script>
  var allButtons = document.querySelectorAll("button.download")
  allButtons.forEach(ele => {
    ele.onclick = function(e) {
    download(e.target.getAttribute("dataHref"))
  }
  })

  function download(pdf) {
    var element = document.createElement("a")
    element.setAttribute("href" , pdf)
    element.setAttribute("download" , pdf.substring(pdf.lastIndexOf('/')+1))
    element.style.display = "none"
    document.body.appendChild(element)
    element.click()
    document.body.removeChild(element)
  }
</script>